/* ==========================================================================
   CSS para o Sistema Global de Combate à Fome (SGCF) - Versão Complexa
   ========================================================================== */

/* @layer base, layout, components, themes, utilities, overrides; */
/* Descomente a linha acima se quiser usar camadas de cascata explícitas */

/* ==========================================================================
   1. Variáveis Globais e Temas (Custom Properties)
   ========================================================================== */

:root {
  /* Paleta de Cores Primária (Tema Claro) */
  --color-primary: #005a9c; /* Azul escuro */
  --color-primary-light: #e6f0f7;
  --color-primary-dark: #003d6b;
  --color-secondary: #d9534f; /* Vermelho/Coral para alertas/ações */
  --color-secondary-light: #fdecea;
  --color-secondary-dark: #a94442;
  --color-accent: #5cb85c; /* Verde para sucesso/positividade */
  --color-accent-light: #edf8ed;
  --color-accent-dark: #3d8b3d;
  --color-warning: #f0ad4e; /* Amarelo/Laranja para avisos */
  --color-warning-light: #fef6e9;
  --color-warning-dark: #c08a3e;
  --color-info: #5bc0de; /* Azul claro para informações */
  --color-info-light: #eef9fc;
  --color-info-dark: #31708f;

  /* Cores de Texto e Fundo (Tema Claro) */
  --color-text-base: #333333;
  --color-text-muted: #666666;
  --color-text-inverse: #ffffff;
  --color-text-link: var(--color-primary);
  --color-text-link-hover: var(--color-primary-dark);
  --color-background-body: #f4f7f6; /* Um cinza muito claro, quase branco */
  --color-background-content: #ffffff;
  --color-background-alt: #e9ecef; /* Fundo alternativo/sutil */
  --color-border: #dee2e6;
  --color-border-light: #f1f3f5;

  /* Tipografia */
  --font-family-sans: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  --font-family-serif: 'Merriweather', Georgia, serif;
  --font-family-monospace: 'SFMono-Regular', Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --font-size-root: 16px; /* Base para REMs */
  --font-size-base: 1rem;
  --font-size-sm: 0.875rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.25rem;
  --font-size-h1: 2.5rem;
  --font-size-h2: 2rem;
  --font-size-h3: 1.75rem;
  --font-size-h4: 1.25rem;
  --line-height-base: 1.6;
  --font-weight-light: 300;
  --font-weight-normal: 400;
  --font-weight-bold: 700;

  /* Espaçamento e Layout */
  --spacing-unit: 1rem;
  --spacing-xs: calc(var(--spacing-unit) * 0.25); /* 4px */
  --spacing-sm: calc(var(--spacing-unit) * 0.5);  /* 8px */
  --spacing-md: var(--spacing-unit);             /* 16px */
  --spacing-lg: calc(var(--spacing-unit) * 1.5);  /* 24px */
  --spacing-xl: calc(var(--spacing-unit) * 2);   /* 32px */
  --spacing-xxl: calc(var(--spacing-unit) * 3);  /* 48px */
  --container-max-width: 1280px;
  --container-padding-x: var(--spacing-lg);
  --border-radius-sm: 0.2rem;
  --border-radius-md: 0.3rem;
  --border-radius-lg: 0.5rem;

  /* Sombras */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  --shadow-inner: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06);
  --shadow-outline: 0 0 0 3px rgba(66, 153, 225, 0.5); /* Exemplo para focus */

  /* Transições */
  --transition-speed-fast: 150ms;
  --transition-speed-normal: 300ms;
  --transition-speed-slow: 500ms;
  --transition-timing-function: ease-in-out;
  --transition-base: all var(--transition-speed-normal) var(--transition-timing-function);
  --transition-colors: background-color var(--transition-speed-fast) var(--transition-timing-function),
                      color var(--transition-speed-fast) var(--transition-timing-function),
                      border-color var(--transition-speed-fast) var(--transition-timing-function);
  --transition-transform: transform var(--transition-speed-normal) var(--transition-timing-function);

  /* Z-Index (Exemplo de Níveis) */
  --z-index-dropdown: 1000;
  --z-index-sticky: 1020;
  --z-index-modal-backdrop: 1040;
  --z-index-modal: 1050;
  --z-index-popover: 1060;
  --z-index-tooltip: 1070;
}

/* Tema Escuro - Pode ser ativado com body.theme-dark ou media query */
@media (prefers-color-scheme: dark) {
  :root:not(.theme-light) { /* Permite override manual com .theme-light */
    --color-primary: #4dabf7; /* Azul mais claro */
    --color-primary-light: #2b3a4a;
    --color-primary-dark: #a5d8ff;
    --color-secondary: #ff8787; /* Coral/Vermelho mais claro */
    --color-secondary-light: #4d3131;
    --color-secondary-dark: #ffc9c9;
    --color-accent: #8ce99a; /* Verde mais claro */
    --color-accent-light: #2f4a3a;
    --color-accent-dark: #d3f9d8;
    --color-warning: #ffc078; /* Laranja mais claro */
    --color-warning-light: #4d4030;
    --color-warning-dark: #ffe8cc;
    --color-info: #74c0fc; /* Azul info mais claro */
    --color-info-light: #2c4454;
    --color-info-dark: #bac8ff;

    /* Cores de Texto e Fundo (Tema Escuro) */
    --color-text-base: #e9ecef; /* Cinza muito claro */
    --color-text-muted: #adb5bd; /* Cinza mais escuro */
    --color-text-inverse: #121212; /* Preto/Cinza muito escuro */
    --color-text-link: var(--color-primary);
    --color-text-link-hover: var(--color-primary-dark);
    --color-background-body: #1a1b1e; /* Cinza muito escuro */
    --color-background-content: #2c2e33; /* Cinza escuro para conteúdo */
    --color-background-alt: #373a40; /* Fundo alternativo mais escuro */
    --color-border: #495057; /* Borda mais clara */
    --color-border-light: #373a40;

    /* Sombras (Podem precisar de ajuste para temas escuros) */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.15);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.2), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
    --shadow-inner: inset 0 2px 4px 0 rgba(0, 0, 0, 0.1);
    --shadow-outline: 0 0 0 3px rgba(77, 171, 247, 0.6); /* Ajuste da cor de foco */
  }
}

/* Forçar tema escuro com classe */
body.theme-dark {
    /* Re-declarar variáveis do tema escuro aqui para garantir precedência */
    /* ... (copiar/colar ou usar um sistema de build para gerar isso) ... */
    --color-primary: #4dabf7;
    --color-primary-light: #2b3a4a;
    --color-primary-dark: #a5d8ff;
    /* ... etc para todas as variáveis de cor/sombra ... */
     --color-text-base: #e9ecef;
     --color-text-muted: #adb5bd;
     --color-text-inverse: #121212;
     --color-background-body: #1a1b1e;
     --color-background-content: #2c2e33;
     --color-background-alt: #373a40;
     --color-border: #495057;
     --color-border-light: #373a40;
     --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.15);
     --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.1);
     --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
     --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.2), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
     --shadow-inner: inset 0 2px 4px 0 rgba(0, 0, 0, 0.1);
     --shadow-outline: 0 0 0 3px rgba(77, 171, 247, 0.6);
}


/* ==========================================================================
   2. Base & Reset Styles
   ========================================================================== */

*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  /* Adicionar transição base a tudo pode ser pesado, mas complexo! */
  /* transition: var(--transition-colors); */
}

html {
  font-size: var(--font-size-root);
  scroll-behavior: smooth;
  -webkit-text-size-adjust: 100%; /* Prevent font scaling in landscape */
   scrollbar-color: var(--color-text-muted) var(--color-background-alt); /* Firefox scrollbar */
   scrollbar-width: thin;
}
/* Chrome/Edge/Safari scrollbar */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: var(--color-background-alt); }
::-webkit-scrollbar-thumb { background-color: var(--color-text-muted); border-radius: 4px; border: 2px solid var(--color-background-alt); }
::-webkit-scrollbar-thumb:hover { background-color: var(--color-text-base); }

body {
  font-family: var(--font-family-sans);
  font-size: var(--font-size-base);
  line-height: var(--line-height-base);
  color: var(--color-text-base);
  background-color: var(--color-background-body);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow-x: hidden; /* Evitar scroll horizontal acidental */
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

main {
  flex: 1; /* Faz o main ocupar o espaço restante */
  display: block; /* Para navegadores mais antigos */
  padding-top: var(--spacing-xl);
  padding-bottom: var(--spacing-xxl);
}

h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-family-serif); /* Usar serif para títulos */
  font-weight: var(--font-weight-bold);
  line-height: 1.2;
  margin-top: var(--spacing-lg);
  margin-bottom: var(--spacing-md);
  color: var(--color-primary-dark); /* Cor específica para títulos */
  letter-spacing: -0.02em;
}

h1 { font-size: var(--font-size-h1); margin-top: 0; } /* Primeiro H1 sem margem superior */
h2 { font-size: var(--font-size-h2); }
h3 { font-size: var(--font-size-h3); }
h4 { font-size: var(--font-size-h4); font-family: var(--font-family-sans); font-weight: var(--font-weight-bold);} /* H4 volta para sans-serif */

p {
  margin-bottom: var(--spacing-md);
}

a {
  color: var(--color-text-link);
  text-decoration: none;
  background-color: transparent;
  transition: var(--transition-colors);
}

a:hover,
a:focus {
  color: var(--color-text-link-hover);
  text-decoration: underline;
  outline: none; /* Remover outline padrão se adicionarmos um customizado */
}
a:focus-visible { /* Estilo de foco mais moderno e acessível */
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
  box-shadow: var(--shadow-outline);
  border-radius: var(--border-radius-sm);
}


img, svg, video, canvas, audio, iframe, embed, object {
  display: block;
  max-width: 100%;
  height: auto;
  vertical-align: middle;
}
svg { fill: currentColor; /* Permite herdar cor do texto */ }

ul, ol {
  list-style-position: inside;
  margin-left: var(--spacing-md);
  margin-bottom: var(--spacing-md);
}
li::marker { /* Estilizar marcadores */
    color: var(--color-primary);
    font-weight: var(--font-weight-bold);
}

dl { margin-bottom: var(--spacing-md); }
dt { font-weight: var(--font-weight-bold); margin-top: var(--spacing-sm); }
dd { margin-left: var(--spacing-md); margin-bottom: var(--spacing-sm); }

table {
  border-collapse: collapse;
  width: 100%;
  margin-bottom: var(--spacing-md);
  background-color: var(--color-background-content); /* Fundo para tabelas */
}
caption {
  caption-side: bottom;
  padding: var(--spacing-sm);
  font-style: italic;
  color: var(--color-text-muted);
  text-align: left;
}
th, td {
  padding: var(--spacing-sm) var(--spacing-md);
  border: 1px solid var(--color-border);
  text-align: left;
  vertical-align: top;
}
th {
  font-weight: var(--font-weight-bold);
  background-color: var(--color-background-alt);
}

form { margin-bottom: var(--spacing-lg); }
fieldset {
  border: 1px solid var(--color-border);
  padding: var(--spacing-lg);
  margin-bottom: var(--spacing-lg);
  border-radius: var(--border-radius-md);
  background-color: rgba(var(--color-primary-rgb, 0, 90, 156), 0.02); /* Fundo sutil no fieldset */
}
legend {
  font-weight: var(--font-weight-bold);
  padding: 0 var(--spacing-sm);
  margin-left: calc(var(--spacing-sm) * -1); /* Alinha com padding do fieldset */
  color: var(--color-primary-dark);
  font-size: var(--font-size-lg);
}

label {
  display: block;
  margin-bottom: var(--spacing-xs);
  font-weight: var(--font-weight-normal); /* Normal weight para labels */
}

input,
button,
select,
textarea {
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
  margin: 0; /* Remove margens padrão */
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  transition: border-color var(--transition-speed-fast) ease-in-out, box-shadow var(--transition-speed-fast) ease-in-out;
  background-color: var(--color-background-content);
  color: var(--color-text-base);
}
input:focus,
button:focus,
select:focus,
textarea:focus {
  border-color: var(--color-primary);
  outline: 0;
  box-shadow: var(--shadow-outline);
}
input[type="radio"],
input[type="checkbox"] {
  padding: 0; /* Tira padding de radio/checkbox */
  width: auto; /* Deixa o navegador controlar o tamanho */
  margin-right: var(--spacing-xs);
  vertical-align: middle; /* Alinha melhor com o texto */
}
input[type="number"] { appearance: textfield; /* Remove setinhas padrão no Chrome/Safari */ }
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; } /* Remove setinhas padrão no Chrome/Safari */

textarea {
  resize: vertical; /* Permite redimensionar apenas verticalmente */
  min-height: 80px;
}
select {
  appearance: none; /* Remove aparência padrão */
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right var(--spacing-md) center;
  background-size: 16px 12px;
  padding-right: calc(var(--spacing-md) * 2 + 16px); /* Espaço para a seta */
}

button,
input[type="button"],
input[type="reset"],
input[type="submit"] {
  cursor: pointer;
  -webkit-appearance: button;
}

/* Utilidade para esconder visualmente mas manter acessível */
.visually-hidden,
.skip-link:not(:focus) {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}
.skip-link:focus {
   position: absolute;
   top: 10px;
   left: 10px;
   z-index: var(--z-index-modal); /* Bem alto */
   background: var(--color-primary);
   color: var(--color-text-inverse);
   padding: var(--spacing-sm) var(--spacing-md);
   border-radius: var(--border-radius-md);
   box-shadow: var(--shadow-lg);
}

/* Para destacar texto com <mark> */
mark {
  background-color: var(--color-warning-light);
  color: var(--color-warning-dark);
  padding: var(--spacing-xs);
  border-radius: var(--border-radius-sm);
}

/* Para <progress> e <meter> */
progress, meter {
  width: 100%;
  height: 10px;
  border: none;
  border-radius: 5px;
  appearance: none; /* Tenta remover estilos nativos */
}
/* Webkit (Chrome, Safari) */
progress::-webkit-progress-bar, meter::-webkit-meter-bar {
  background-color: var(--color-background-alt);
  border-radius: 5px;
}
progress::-webkit-progress-value, meter::-webkit-meter-optimum-value, meter::-webkit-meter-suboptimum-value, meter::-webkit-meter-even-less-good-value {
  background-color: var(--color-accent);
  border-radius: 5px;
  transition: width var(--transition-speed-slow) var(--transition-timing-function); /* Anima a mudança de valor */
}
meter::-webkit-meter-suboptimum-value { background-color: var(--color-warning); }
meter::-webkit-meter-even-less-good-value { background-color: var(--color-secondary); }
/* Firefox */
progress::-moz-progress-bar {
  background-color: var(--color-accent);
  border-radius: 5px;
  transition: width var(--transition-speed-slow) var(--transition-timing-function);
}
meter::-moz-meter-bar, meter::-moz-meter-optimum, meter::-moz-meter-sub-optimum, meter::-moz-meter-sub-sub-optimum {
  border-radius: 5px;
}
meter::-moz-meter-optimum::-moz-meter-bar { background: var(--color-accent); }
meter::-moz-meter-sub-optimum::-moz-meter-bar { background: var(--color-warning); }
meter::-moz-meter-sub-sub-optimum::-moz-meter-bar { background: var(--color-secondary); }

/* Para <details> e <summary> */
details {
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-md);
  padding: var(--spacing-md);
  margin-bottom: var(--spacing-md);
  background-color: var(--color-background-content);
}
summary {
  cursor: pointer;
  font-weight: var(--font-weight-bold);
  color: var(--color-primary);
  list-style: none; /* Remove marcador padrão */
  position: relative;
  padding-left: var(--spacing-lg);
}
summary::before { /* Adiciona um marcador customizado */
  content: '▶';
  position: absolute;
  left: 0;
  top: 0;
  display: inline-block;
  transition: transform var(--transition-speed-fast);
  color: var(--color-primary);
}
details[open] > summary::before {
  transform: rotate(90deg);
}
details > *:not(summary) { /* Conteúdo dentro do details */
  margin-top: var(--spacing-md);
  padding-left: var(--spacing-lg); /* Indenta o conteúdo */
  border-left: 2px solid var(--color-primary-light);
}

/* ==========================================================================
   3. Layout Principal
   ========================================================================== */

.container-fluid {
  width: 100%;
  padding-right: var(--container-padding-x);
  padding-left: var(--container-padding-x);
  margin-right: auto;
  margin-left: auto;
}

/* Estilo para containers com largura máxima */
.container {
    max-width: var(--container-max-width);
    padding-right: var(--container-padding-x);
    padding-left: var(--container-padding-x);
    margin-right: auto;
    margin-left: auto;
}


/* --- Cabeçalho --- */
.site-header {
  background-color: var(--color-background-content);
  border-bottom: 1px solid var(--color-border);
  padding: var(--spacing-sm) 0;
  position: sticky; /* Cabeçalho fixo */
  top: 0;
  z-index: var(--z-index-sticky);
  box-shadow: var(--shadow-sm);
}
.site-header .header-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap; /* Permite quebrar linha em telas pequenas */
}

.header-branding {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}
.logo-link .logo-svg {
  height: 40px;
  width: auto;
  display: block;
}
.site-title {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-base); /* Cor base no logo */
  display: none; /* Esconde o título em texto se o SVG já o contém */
}
.site-tagline {
  font-size: var(--font-size-sm);
  color: var(--color-text-muted);
  margin: 0;
}

/* --- Navegação Principal --- */
.main-navigation {
  position: relative; /* Para posicionamento do submenu */
}
.menu-toggle { display: none; /* Escondido por padrão */ }
.primary-menu {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  gap: var(--spacing-xs); /* Pequeno espaço entre itens */
}
.primary-menu .menu-item {
  position: relative; /* Para submenus */
}
.primary-menu .menu-item > a {
  display: block;
  padding: var(--spacing-md) var(--spacing-lg);
  color: var(--color-text-base);
  font-weight: var(--font-weight-normal);
  text-decoration: none;
  border-radius: var(--border-radius-md);
  position: relative; /* Para pseudo-elementos */
  overflow: hidden; /* Para efeitos de fundo */
  z-index: 1;
}
/* Efeito de sublinhado animado */
.primary-menu .menu-item > a::after {
    content: '';
    position: absolute;
    bottom: 5px; /* Posição do sublinhado */
    left: 50%;
    width: 0;
    height: 2px;
    background-color: var(--color-primary);
    transition: all var(--transition-speed-normal) cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Efeito "elástico" */
    transform: translateX(-50%);
}
.primary-menu .menu-item:hover > a::after,
.primary-menu .menu-item:focus-within > a::after, /* Para acessibilidade com teclado */
.primary-menu .menu-item.current-menu-item > a::after {
    width: calc(100% - var(--spacing-lg)); /* Largura do sublinhado */
}

.primary-menu .menu-item.current-menu-item > a {
  font-weight: var(--font-weight-bold);
  color: var(--color-primary);
  background-color: var(--color-primary-light); /* Destaca item atual */
}

/* Submenus */
.primary-menu .sub-menu,
.primary-menu .sub-sub-menu {
  position: absolute;
  top: 100%;
  left: 0;
  background-color: var(--color-background-content);
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-md);
  list-style: none;
  margin: 0;
  padding: var(--spacing-sm) 0;
  min-width: 200px;
  z-index: var(--z-index-dropdown);
  opacity: 0;
  visibility: hidden;
  transform: translateY(10px) scaleY(0.95); /* Efeito de entrada */
  transform-origin: top center;
  transition: opacity var(--transition-speed-fast) var(--transition-timing-function),
              visibility 0s var(--transition-speed-fast) linear, /* Esconde instantaneamente */
              transform var(--transition-speed-fast) var(--transition-timing-function);
  border-radius: 0 0 var(--border-radius-md) var(--border-radius-md);
}
.primary-menu .sub-sub-menu { /* Nível 3 */
    top: calc(var(--spacing-sm) * -1); /* Alinha com item pai */
    left: 100%;
    border-radius: var(--border-radius-md); /* Todos os cantos arredondados */
}

/* Exibir submenus no hover/focus */
.primary-menu .menu-item:hover > .sub-menu,
.primary-menu .menu-item:focus-within > .sub-menu { /* Importante para teclado */
  opacity: 1;
  visibility: visible;
  transform: translateY(0) scaleY(1);
  transition-delay: 0s; /* Remove delay para esconder */
}
.primary-menu .sub-menu .menu-item:hover > .sub-sub-menu,
.primary-menu .sub-menu .menu-item:focus-within > .sub-sub-menu {
    opacity: 1;
    visibility: visible;
    transform: translateX(0) scaleX(1); /* Mudei pra X no sub-sub */
    transition-delay: 0s;
}

/* Estilos dos itens do submenu */
.primary-menu .sub-menu a,
.primary-menu .sub-sub-menu a {
  display: block;
  padding: var(--spacing-sm) var(--spacing-md);
  color: var(--color-text-base);
  white-space: nowrap;
  transition: var(--transition-colors);
  font-weight: var(--font-weight-normal);
}
.primary-menu .sub-menu a:hover,
.primary-menu .sub-menu a:focus,
.primary-menu .sub-sub-menu a:hover,
.primary-menu .sub-sub-menu a:focus {
  background-color: var(--color-primary-light);
  color: var(--color-primary-dark);
  text-decoration: none;
}
/* Indicador de submenu */
.primary-menu .has-submenu > a::after {
    content: ' ▼'; /* Seta para baixo */
    display: inline-block;
    font-size: 0.7em;
    margin-left: var(--spacing-xs);
    vertical-align: middle;
}
.primary-menu .sub-menu .has-submenu > a::after {
    content: ' ▶'; /* Seta para direita */
    position: absolute;
    right: var(--spacing-md);
    top: 50%;
    transform: translateY(-50%);
}


/* --- Área do Usuário --- */
.header-user-area {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}
.user-status a,
.user-status span {
  display: inline-block;
  margin-left: var(--spacing-sm);
}
.user-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 2px solid var(--color-border);
    vertical-align: middle;
}
.user-menu-container { position: relative; }
.user-menu {
    /* Estilos similares ao submenu da navegação principal */
    position: absolute;
    top: calc(100% + 5px);
    right: 0;
    background-color: var(--color-background-content);
    border: 1px solid var(--color-border);
    box-shadow: var(--shadow-md);
    list-style: none;
    margin: 0;
    padding: var(--spacing-sm) 0;
    min-width: 180px;
    z-index: var(--z-index-dropdown);
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px);
    transition: var(--transition-base);
    border-radius: var(--border-radius-md);
}
.user-menu-container:hover .user-menu, /* Simplificado, idealmente usar JS/ARIA */
.user-menu-toggle[aria-expanded="true"] + .user-menu {
     opacity: 1;
     visibility: visible;
     transform: translateY(0);
}
.user-menu li a { /* Estilo dos links */
    display: block;
    padding: var(--spacing-sm) var(--spacing-md);
    color: var(--color-text-base);
}
.user-menu li a:hover, .user-menu li a:focus {
     background-color: var(--color-primary-light);
     color: var(--color-primary-dark);
     text-decoration: none;
}

/* --- Busca e Idioma --- */
.header-search-form {
    display: flex;
    align-items: center;
    position: relative;
}
.header-search-form .search-input {
    padding: var(--spacing-xs) var(--spacing-sm);
    padding-right: 30px; /* Espaço para o botão */
    border-radius: var(--border-radius-lg); /* Mais arredondado */
    width: 150px; /* Largura inicial */
    transition: width var(--transition-speed-normal) ease-in-out;
}
.header-search-form .search-input:focus {
    width: 250px; /* Expande no foco */
}
.header-search-form .search-submit {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    border: none;
    background: transparent;
    padding: 0 var(--spacing-sm);
    color: var(--color-text-muted);
    cursor: pointer;
}
.header-search-form .search-submit:hover { color: var(--color-primary); }
.header-search-form .icon-search { width: 16px; height: 16px; }

.language-switcher { position: relative; }
.language-switcher .lang-current {
    background: none;
    border: none;
    cursor: pointer;
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
    padding: var(--spacing-xs);
}
.language-switcher .lang-current:hover,
.language-switcher .lang-current[aria-expanded="true"] { color: var(--color-primary); }
.language-switcher .lang-flag { margin-right: var(--spacing-xs); font-size: 1.2em; }
.language-switcher .lang-list {
    /* Estilos similares ao submenu */
    position: absolute;
    top: 100%;
    right: 0;
    background-color: var(--color-background-content);
    border: 1px solid var(--color-border);
    box-shadow: var(--shadow-md);
    list-style: none;
    margin: 0;
    padding: var(--spacing-sm) 0;
    min-width: 150px;
    z-index: var(--z-index-dropdown);
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px);
    transition: var(--transition-base);
    border-radius: var(--border-radius-md);
}
.language-switcher:hover .lang-list, /* Simplificado */
.language-switcher .lang-current[aria-expanded="true"] + .lang-list {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}
.language-switcher .lang-list a {
    display: flex; /* Alinha bandeira e texto */
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    color: var(--color-text-base);
}
.language-switcher .lang-list a:hover,
.language-switcher .lang-list a:focus {
     background-color: var(--color-primary-light);
     color: var(--color-primary-dark);
     text-decoration: none;
}

/* --- Rodapé --- */
.site-footer {
  background-color: var(--color-background-alt); /* Fundo diferente */
  color: var(--color-text-muted);
  padding: var(--spacing-xl) 0 var(--spacing-md);
  margin-top: var(--spacing-xxl); /* Espaço antes do rodapé */
  border-top: 3px solid var(--color-primary); /* Linha superior colorida */
}
.footer-widgets-area {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* Layout responsivo */
  gap: var(--spacing-xl);
  margin-bottom: var(--spacing-xl);
}
.footer-widget h4 {
  font-size: var(--font-size-lg);
  margin-bottom: var(--spacing-md);
  color: var(--color-primary-dark);
  font-family: var(--font-family-sans); /* Volta pra sans-serif no footer */
}
.footer-nav-menu {
  list-style: none;
  margin: 0;
  padding: 0;
}
.footer-nav-menu li {
  margin-bottom: var(--spacing-xs);
}
.footer-nav-menu a {
  color: var(--color-text-muted);
  text-decoration: none;
}
.footer-nav-menu a:hover,
.footer-nav-menu a:focus {
  color: var(--color-primary);
  text-decoration: underline;
}

#newsletter-form-footer {
    display: flex;
    gap: var(--spacing-sm);
}
#newsletter-form-footer input[type="email"] { flex-grow: 1; }

.partner-logos {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-md);
    align-items: center;
}
.partner-logos img {
    max-height: 30px;
    width: auto;
    opacity: 0.7;
    transition: opacity var(--transition-speed-fast);
    filter: grayscale(50%); /* Efeito sutil */
}
.partner-logos img:hover {
    opacity: 1;
    filter: grayscale(0%);
}

.footer-bottom {
  border-top: 1px solid var(--color-border);
  padding-top: var(--spacing-md);
  text-align: center;
  font-size: var(--font-size-sm);
}
.footer-bottom p { margin-bottom: var(--spacing-xs); }


/* ==========================================================================
   4. Componentes Reutilizáveis
   ========================================================================== */

/* --- Botões --- */
.btn {
  display: inline-block;
  font-weight: var(--font-weight-normal);
  color: var(--color-text-base);
  text-align: center;
  vertical-align: middle;
  cursor: pointer;
  user-select: none;
  background-color: transparent;
  border: 1px solid transparent;
  padding: var(--spacing-sm) var(--spacing-lg);
  font-size: var(--font-size-base);
  line-height: var(--line-height-base);
  border-radius: var(--border-radius-md);
  transition: var(--transition-base);
  text-decoration: none !important; /* Sobrescreve decoração de link */
  position: relative; /* Para efeitos */
  overflow: hidden;
  z-index: 1;
}

.btn:hover { filter: brightness(1.1); /* Efeito simples de brilho */ }
.btn:focus, .btn:focus-visible {
    outline: 0;
    box-shadow: var(--shadow-outline);
}
.btn:active {
    transform: scale(0.98); /* Efeito de clique */
    filter: brightness(0.9);
}

/* Botão Primário */
.btn-primary {
  color: var(--color-text-inverse);
  background-color: var(--color-primary);
  border-color: var(--color-primary);
}
.btn-primary:hover {
  background-color: var(--color-primary-dark);
  border-color: var(--color-primary-dark);
}

/* Botão Secundário (Contorno) */
.btn-secondary {
  color: var(--color-primary);
  background-color: transparent;
  border-color: var(--color-primary);
}
.btn-secondary:hover {
  color: var(--color-text-inverse);
  background-color: var(--color-primary);
  border-color: var(--color-primary);
}

/* Botão Perigo/Alerta */
.btn-danger {
    color: var(--color-text-inverse);
    background-color: var(--color-secondary);
    border-color: var(--color-secondary);
}
.btn-danger:hover {
    background-color: var(--color-secondary-dark);
    border-color: var(--color-secondary-dark);
}

/* Botão Sucesso */
.btn-success {
    color: var(--color-text-inverse);
    background-color: var(--color-accent);
    border-color: var(--color-accent);
}
.btn-success:hover {
    background-color: var(--color-accent-dark);
    border-color: var(--color-accent-dark);
}

/* Tamanhos */
.btn-sm {
  padding: var(--spacing-xs) var(--spacing-sm);
  font-size: var(--font-size-sm);
}
.btn-lg {
  padding: var(--spacing-md) var(--spacing-xl);
  font-size: var(--font-size-lg);
}

/* Botão Refresh (exemplo específico) */
.btn-refresh::before {
    content: '🔄'; /* Ícone simples */
    margin-right: var(--spacing-xs);
    display: inline-block;
    animation: spin 2s linear infinite paused; /* Animação pausada */
}
.btn-refresh:active::before {
    animation-play-state: running; /* Gira ao clicar */
}

/* --- Formulários Complexos --- */
.complex-form .form-group {
  margin-bottom: var(--spacing-lg);
  /* Animação sutil ao focar em um grupo */
  transition: background-color var(--transition-speed-normal);
  padding: var(--spacing-xs);
  border-radius: var(--border-radius-sm);
}
.complex-form .form-group:focus-within {
    background-color: var(--color-primary-light);
}

.complex-form .inline-fields {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
}
/* Estilos específicos para inputs dentro de .inline-fields */
.complex-form .inline-fields > div > input { width: 100%; }

.complex-form .radio-group,
.complex-form .checkbox-group {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-sm) var(--spacing-lg); /* Espaço entre opções */
  border: none; /* Remove borda padrão */
  padding: var(--spacing-sm);
}
.complex-form .radio-group label,
.complex-form .checkbox-group label {
  margin-bottom: 0; /* Remove margem inferior padrão da label */
  display: inline-flex; /* Alinha input e texto */
  align-items: center;
  cursor: pointer;
}
.complex-form .radio-group input[type="radio"] + label::before, /* Estilo customizado */
.complex-form .checkbox-group input[type="checkbox"] + label::before {
    content: '';
    display: inline-block;
    width: 1em;
    height: 1em;
    border: 1px solid var(--color-border);
    margin-right: var(--spacing-sm);
    background-color: var(--color-background-content);
    transition: var(--transition-base);
}
.complex-form .radio-group input[type="radio"] + label::before { border-radius: 50%; }
.complex-form .checkbox-group input[type="checkbox"] + label::before { border-radius: var(--border-radius-sm); }

.complex-form .radio-group input[type="radio"]:checked + label::before,
.complex-form .checkbox-group input[type="checkbox"]:checked + label::before {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23fff' d='M6.564.75l-3.59 3.6-1.5-1.5L0 4.26 2.974 7.25 8 2.193z'/%3e%3c/svg%3e"); /* Checkmark */
    background-repeat: no-repeat;
    background-position: center center;
    background-size: 50% 50%;
}
/* Esconde input original */
.complex-form .radio-group input[type="radio"],
.complex-form .checkbox-group input[type="checkbox"] {
    opacity: 0;
    position: absolute;
    width: 1px;
    height: 1px;
}
.complex-form .group-label { /* Label para grupo de checkbox/radio */
    display: block;
    width: 100%;
    font-weight: var(--font-weight-bold);
    margin-bottom: var(--spacing-sm);
}

/* Preset Amounts - Botões de Doação */
.preset-amounts {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
    margin-top: var(--spacing-xs);
}
.preset-amounts button {
    flex: 1 1 auto; /* Ocupa espaço disponível */
    background-color: var(--color-background-alt);
    border: 1px solid var(--color-border);
    color: var(--color-primary);
    padding: var(--spacing-sm);
}
.preset-amounts button:hover {
    background-color: var(--color-primary-light);
    border-color: var(--color-primary);
}
.preset-amounts button:active,
.preset-amounts button.active { /* Estado ativo via JS */
    background-color: var(--color-primary);
    color: var(--color-text-inverse);
    border-color: var(--color-primary);
}

.form-actions {
    margin-top: var(--spacing-xl);
    padding-top: var(--spacing-lg);
    border-top: 1px dashed var(--color-border); /* Divisor sutil */
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-md);
}
.form-security-notice {
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-xs);
}
.form-security-notice .icon-lock {
    width: 1em;
    height: 1em;
    color: var(--color-accent);
}

/* Feedback de validação (exemplo) */
input:required:invalid, select:required:invalid, textarea:required:invalid {
    border-color: var(--color-secondary);
    box-shadow: 0 0 0 2px rgba(var(--color-secondary-rgb, 217, 83, 79), 0.3);
}
input:required:valid, select:required:valid, textarea:required:valid {
    border-color: var(--color-accent);
}

/* --- Badges/Tags --- */
.badge {
  display: inline-block;
  padding: var(--spacing-xs) var(--spacing-sm);
  font-size: 75%;
  font-weight: var(--font-weight-bold);
  line-height: 1;
  text-align: center;
  white-space: nowrap;
  vertical-align: baseline;
  border-radius: var(--border-radius-lg); /* Bem arredondado */
  transition: var(--transition-colors);
}
.badge-danger { background-color: var(--color-secondary); color: var(--color-text-inverse); }
.badge-warning { background-color: var(--color-warning); color: var(--color-text-inverse); }
.badge-success { background-color: var(--color-accent); color: var(--color-text-inverse); }
.badge-info { background-color: var(--color-info); color: var(--color-text-inverse); }
.badge-primary { background-color: var(--color-primary); color: var(--color-text-inverse); }

/* --- Tabelas Complexas --- */
.complex-table {
    border: 1px solid var(--color-border-light); /* Borda mais clara na tabela toda */
    box-shadow: var(--shadow-md);
    border-radius: var(--border-radius-md);
    overflow: hidden; /* Para o border-radius funcionar com o fundo do thead */
}
.complex-table thead th {
    background-color: var(--color-primary); /* Cabeçalho primário */
    color: var(--color-text-inverse);
    border-color: var(--color-primary-dark);
    border-width: 0 0 2px 0; /* Apenas borda inferior grossa */
    font-size: var(--font-size-sm);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding-top: var(--spacing-md);
    padding-bottom: var(--spacing-md);
}
.complex-table tbody tr {
    transition: background-color var(--transition-speed-fast);
    border-bottom: 1px solid var(--color-border-light);
}
.complex-table tbody tr:last-child { border-bottom: none; }
.complex-table tbody tr:nth-child(even) { background-color: var(--color-background-alt); }
.complex-table tbody tr:hover {
    background-color: var(--color-primary-light);
    /* Efeito de sombra sutil no hover da linha */
    box-shadow: inset 0 0 0 9999px rgba(var(--color-primary-rgb), 0.05);
}
.complex-table tbody th[scope="row"] { /* Header da linha */
    font-weight: var(--font-weight-bold);
    color: var(--color-primary-dark);
}
.complex-table td, .complex-table th {
    border-style: solid;
    border-width: 0 1px 0 0; /* Apenas bordas verticais */
    border-color: var(--color-border-light);
    padding: var(--spacing-md); /* Mais padding */
}
.complex-table td:last-child, .complex-table th:last-child { border-right: 0; }

/* Alinhamento e estilos específicos de células */
.complex-table .numeric { text-align: right; font-variant-numeric: tabular-nums; }
.complex-table .severity-level { font-size: var(--font-size-sm); font-weight: var(--font-weight-bold); padding: 2px 4px; border-radius: var(--border-radius-sm); margin-left: var(--spacing-xs); }
.complex-table .severity-level.critical { background-color: var(--color-secondary); color: var(--color-text-inverse); }
.complex-table .severity-level.high { background-color: var(--color-warning); color: var(--color-text-inverse); }
.complex-table .severity-level.moderate { background-color: var(--color-info); color: var(--color-text-inverse); }
/* ... outros níveis */
.complex-table .trend-indicator { display: inline-block; padding-left: 1.2em; position: relative; }
.complex-table .trend-indicator::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    border: 0.4em solid transparent;
}
.complex-table .trend-indicator.increase::before { border-bottom-color: var(--color-secondary); transform: translateY(-70%) rotate(0deg); /* Seta pra cima */ }
.complex-table .trend-indicator.decrease::before { border-top-color: var(--color-accent); transform: translateY(-30%) rotate(0deg); /* Seta pra baixo */ }
.complex-table .trend-indicator.stable::before { content: '='; border: none; transform: translateY(-50%); color: var(--color-text-muted); font-weight: bold; }
.complex-table .trend-indicator.slight-increase::before { border-bottom-color: var(--color-warning); transform: translateY(-70%) rotate(0deg); }

.complex-table tfoot {
    background-color: var(--color-background-alt);
    font-weight: var(--font-weight-bold);
    border-top: 2px solid var(--color-border);
}
.complex-table tfoot td { color: var(--color-text-muted); }

.table-responsive {
    overflow-x: auto; /* Permite scroll horizontal em telas pequenas */
    -webkit-overflow-scrolling: touch; /* Scroll suave em iOS */
    margin-bottom: var(--spacing-md);
    border: 1px solid var(--color-border); /* Borda no container responsivo */
    border-radius: var(--border-radius-md);
}

/* ==========================================================================
   5. Estilos Específicos das Seções
   ========================================================================== */

/* --- Seção Genérica --- */
.main-section {
  margin-bottom: var(--spacing-xxl);
  padding: var(--spacing-xl);
  background-color: var(--color-background-content);
  border-radius: var(--border-radius-lg);
  box-shadow: var(--shadow-lg);
  position: relative; /* Para pseudo-elementos decorativos */
  overflow: hidden; /* Para pseudo-elementos */
}
/* Efeito decorativo sutil no topo da seção */
.main-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 5px;
    background: linear-gradient(to right, var(--color-primary), var(--color-accent));
    opacity: 0.8;
}

.section-header {
  margin-bottom: var(--spacing-xl);
  border-bottom: 1px solid var(--color-border-light);
  padding-bottom: var(--spacing-lg);
}
.section-header .section-title {
  margin-bottom: var(--spacing-xs);
}
.section-header .section-subtitle {
  font-size: var(--font-size-lg);
  color: var(--color-text-muted);
  margin-bottom: var(--spacing-md);
}
.section-controls {
    display: flex;
    gap: var(--spacing-md);
    align-items: center;
    flex-wrap: wrap;
    background-color: var(--color-background-alt);
    padding: var(--spacing-sm);
    border-radius: var(--border-radius-md);
}

/* --- Dashboard --- */
.dashboard-grid {
  display: grid;
  /* Grid complexo: 2 colunas principais, mapa ocupa mais espaço */
  grid-template-columns: repeat(3, 1fr); /* 3 colunas de tamanho igual por padrão */
  grid-template-areas: /* Definindo áreas para posicionar widgets */
    "map map stats"
    "map map alerts";
  gap: var(--spacing-xl);
}

/* Posicionando widgets nas áreas */
#widget-map { grid-area: map; }
#widget-stats { grid-area: stats; }
#widget-alerts { grid-area: alerts; }

.dashboard-widget {
  background-color: var(--color-background-content); /* Fundo ligeiramente diferente */
  border: 1px solid var(--color-border-light);
  border-radius: var(--border-radius-md);
  box-shadow: var(--shadow-md);
  display: flex;
  flex-direction: column; /* Organiza header, content, footer */
  transition: transform var(--transition-speed-normal), box-shadow var(--transition-speed-normal);
}
.dashboard-widget:hover {
    transform: translateY(-5px) scale(1.01);
    box-shadow: var(--shadow-xl);
}

.widget-header {
  padding: var(--spacing-md);
  border-bottom: 1px solid var(--color-border-light);
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: var(--color-background-alt); /* Cabeçalho do widget destacado */
  border-radius: var(--border-radius-md) var(--border-radius-md) 0 0;
}
.widget-title {
  font-size: var(--font-size-lg);
  margin: 0;
  color: var(--color-primary-dark);
}
.widget-controls button { /* Botões de controle no widget */
    margin-left: var(--spacing-sm);
    padding: var(--spacing-xs) var(--spacing-sm);
    font-size: var(--font-size-sm);
    /* Estilo de botão "tab" */
    background: transparent;
    border: 1px solid var(--color-border);
    color: var(--color-text-muted);
}
.widget-controls button.active, /* Classe adicionada via JS */
.widget-controls button:hover {
    background-color: var(--color-primary);
    color: var(--color-text-inverse);
    border-color: var(--color-primary);
}

.widget-content {
  padding: var(--spacing-lg);
  flex-grow: 1; /* Ocupa espaço disponível */
}
.widget-footer {
  padding: var(--spacing-sm) var(--spacing-md);
  border-top: 1px solid var(--color-border-light);
  font-size: var(--font-size-sm);
  color: var(--color-text-muted);
  background-color: var(--color-background-alt);
  border-radius: 0 0 var(--border-radius-md) var(--border-radius-md);
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.widget-link { text-decoration: none; font-weight: bold; }
.widget-link::after { content: ' →'; }

/* Estilos específicos dos widgets */
#interactive-map-container {
  min-height: 400px; /* Altura mínima */
  background-color: var(--color-background-alt);
  border-radius: var(--border-radius-sm);
  display: flex;
  justify-content: center;
  align-items: center;
  color: var(--color-text-muted);
  border: 1px dashed var(--color-border);
}
.map-legend { margin-top: var(--spacing-md); font-size: var(--font-size-sm); }
.map-legend ul { list-style: none; padding: 0; margin: 0; display: flex; gap: var(--spacing-md); flex-wrap: wrap; }
.map-legend li { display: inline-flex; align-items: center; }
.map-legend .legend-color {
    width: 1em; height: 1em; display: inline-block;
    margin-right: var(--spacing-xs); border: 1px solid rgba(0,0,0,0.1);
}

.key-stats-list .stat-item {
    margin-bottom: var(--spacing-lg);
    padding-bottom: var(--spacing-lg);
    border-bottom: 1px dashed var(--color-border-light);
}
.key-stats-list .stat-item:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
.key-stats-list dt {
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
    margin-bottom: var(--spacing-xs);
}
.key-stats-list dd {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-primary-dark);
    margin-left: 0;
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
}
.key-stats-list .stat-trend {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-normal);
    padding-left: 1.2em; /* Espaço para ícone */
    position: relative;
}
.key-stats-list .stat-trend::before { /* Usa o mesmo estilo da tabela */
    content: ''; position: absolute; left: 0; top: 50%; border: 0.4em solid transparent;
}
.key-stats-list .stat-trend[data-trend="up"]::before { border-bottom-color: var(--color-secondary); transform: translateY(-70%); }
.key-stats-list .stat-trend[data-trend="down"]::before { border-top-color: var(--color-accent); transform: translateY(-30%); }
.key-stats-list .stat-trend[data-trend="stable"]::before { content: '='; border: none; transform: translateY(-50%); color: var(--color-text-muted); font-weight: bold; }

.key-stats-list meter, .key-stats-list progress {
    flex-basis: 100%; /* Ocupa linha inteira se quebrar */
    margin-top: var(--spacing-xs);
    height: 12px;
    border-radius: 6px;
}

.alert-list { list-style: none; margin: 0; padding: 0; }
.alert-item {
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-left-width: 5px;
    border-left-style: solid;
    border-radius: var(--border-radius-sm);
    position: relative; /* Para animação */
    animation: fadeInAlert 0.5s ease-out forwards;
    opacity: 0; /* Começa invisível */
}
/* Adiciona delay baseado no índice do item (requer JS ou N+ selector se estático) */
.alert-item:nth-child(1) { animation-delay: 0.1s; }
.alert-item:nth-child(2) { animation-delay: 0.2s; }
.alert-item:nth-child(3) { animation-delay: 0.3s; }
/* ... etc */

.alert-item.critical { border-left-color: var(--color-secondary); background-color: var(--color-secondary-light); }
.alert-item.high { border-left-color: var(--color-warning); background-color: var(--color-warning-light); }
.alert-item.medium { border-left-color: var(--color-info); background-color: var(--color-info-light); }
/* ... outros níveis */
.alert-item strong { color: var(--color-primary-dark); }
.alert-item time { font-size: var(--font-size-sm); color: var(--color-text-muted); margin-left: var(--spacing-sm); }

/* --- Hub de Dados --- */
#data-hub .data-content-wrapper {
    display: grid;
    grid-template-columns: 1fr; /* Uma coluna por padrão */
    gap: var(--spacing-xl);
}
@media (min-width: 992px) { /* Em telas maiores, layout mais complexo */
    #data-hub .data-content-wrapper {
        grid-template-columns: 2fr 1fr; /* Tabela maior, gráficos/api menor */
        grid-template-areas:
            "table visualizations"
            "table api";
    }
    #regional-data-table { grid-area: table; }
    #data-visualizations { grid-area: visualizations; }
    #api-access { grid-area: api; }
}

.data-subsection h3 {
    color: var(--color-primary);
    margin-bottom: var(--spacing-md);
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--color-primary-light);
}
.table-controls { margin-bottom: var(--spacing-md); display: flex; gap: var(--spacing-md); }

.visualization-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-lg);
}
.viz-item figure { margin: 0; }
.viz-item figcaption {
    font-weight: var(--font-weight-bold);
    margin-bottom: var(--spacing-sm);
    text-align: center;
}
.chart-placeholder {
    min-height: 200px;
    border: 1px dashed var(--color-border);
    display: flex;
    justify-content: center;
    align-items: center;
    color: var(--color-text-muted);
    background-color: var(--color-background-alt);
    border-radius: var(--border-radius-md);
    margin-bottom: var(--spacing-sm);
}
.viz-item button { font-size: var(--font-size-sm); }

#api-access .api-info,
#api-access .download-section {
    margin-bottom: var(--spacing-lg);
    padding: var(--spacing-md);
    background-color: var(--color-background-alt);
    border-radius: var(--border-radius-md);
}
#api-access code {
    background-color: var(--color-border-light);
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--border-radius-sm);
    font-family: var(--font-family-monospace);
    color: var(--color-secondary-dark); /* Cor diferente pro código */
}
#api-access .download-section ul { list-style: none; margin: 0; padding: 0; }
#api-access .download-section li { margin-bottom: var(--spacing-sm); }
#api-access .download-section a::before { content: '📄 '; } /* Ícone simples de arquivo */

/* --- Centro de Ação --- */
.action-tabs-container { position: relative; }
.action-tabs {
    list-style: none;
    padding: 0;
    margin: 0 0 var(--spacing-lg) 0;
    display: flex;
    gap: var(--spacing-xs);
    border-bottom: 2px solid var(--color-border);
    position: relative; /* Para a linha móvel */
}
/* Linha que se move sob a aba ativa (requer JS para posicionar) */
.action-tabs::after {
    content: '';
    position: absolute;
    bottom: -2px; /* Alinha com a borda */
    left: 0; /* Posição inicial (será ajustada por JS) */
    height: 2px;
    width: 0; /* Largura inicial (será ajustada por JS) */
    background-color: var(--color-primary);
    transition: left var(--transition-speed-normal) var(--transition-timing-function),
                width var(--transition-speed-normal) var(--transition-timing-function);
}

.action-tabs [role="tab"] {
    padding: var(--spacing-md) var(--spacing-lg);
    border: none;
    border-bottom: 2px solid transparent; /* Espaço para a linha móvel */
    background: none;
    cursor: pointer;
    font-size: var(--font-size-lg);
    color: var(--color-text-muted);
    margin-bottom: -2px; /* Puxa para baixo para alinhar com a borda */
    transition: var(--transition-colors);
}
.action-tabs [role="tab"]:hover,
.action-tabs [role="tab"]:focus {
    color: var(--color-primary);
}
.action-tabs [role="tab"][aria-selected="true"] {
    color: var(--color-primary);
    font-weight: var(--font-weight-bold);
    /* A linha ::after cuidará do destaque inferior */
}

.action-panel {
    padding: var(--spacing-lg) 0; /* Espaço vertical apenas */
    /* Animação de fade-in/out (melhor com JS controlando display) */
    transition: opacity var(--transition-speed-normal);
}
.action-panel[hidden] { display: none; /* Essencial para o tabpanel */ }
/* Efeito de fade se controlarmos visibilidade com uma classe */
.action-panel.is-hidden { opacity: 0; visibility: hidden; }
.action-panel.is-visible { opacity: 1; visibility: visible; }


/* Lista de Projetos */
.project-filters { margin-bottom: var(--spacing-lg); display: flex; gap: var(--spacing-md); flex-wrap: wrap; }
.project-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: var(--spacing-xl);
}
.project-card {
    background-color: var(--color-background-content);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-md);
    overflow: hidden; /* Para imagem e cantos */
    display: flex;
    flex-direction: column;
    transition: transform var(--transition-speed-normal), box-shadow var(--transition-speed-normal);
    position: relative; /* Para tags */
}
.project-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-xl);
}
.project-card .project-image {
    margin: 0;
    line-height: 0; /* Remove espaço abaixo da imagem */
    position: relative;
    overflow: hidden;
}
.project-card .project-image img {
    width: 100%;
    height: 200px; /* Altura fixa para consistência */
    object-fit: cover; /* Garante que a imagem cubra a área */
    transition: transform var(--transition-speed-slow);
}
.project-card:hover .project-image img {
    transform: scale(1.05) rotate(1deg); /* Efeito sutil de zoom/rotação */
}
/* Overlay gradiente sobre a imagem */
.project-card .project-image::after {
    content: '';
    position: absolute;
    bottom: 0; left: 0; right: 0;
    height: 50%;
    background: linear-gradient(to top, rgba(0,0,0,0.5), transparent);
    opacity: 0.8;
    transition: opacity var(--transition-speed-normal);
}
.project-card:hover .project-image::after { opacity: 1; }


.project-card .project-content {
    padding: var(--spacing-lg);
    flex-grow: 1;
    display: flex;
    flex-direction: column;
}
.project-header { margin-bottom: var(--spacing-md); }
.project-title { font-size: var(--font-size-lg); margin: 0 0 var(--spacing-xs) 0; color: var(--color-primary-dark); }
.project-region-tag, .project-type-tag {
    font-size: var(--font-size-sm);
    background-color: var(--color-primary-light);
    color: var(--color-primary-dark);
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--border-radius-sm);
    display: inline-block;
    margin-right: var(--spacing-xs);
    margin-bottom: var(--spacing-xs);
}
.project-type-tag { background-color: var(--color-accent-light); color: var(--color-accent-dark); }
.project-description { color: var(--color-text-muted); margin-bottom: var(--spacing-md); flex-grow: 1; }
.project-progress { margin-bottom: var(--spacing-md); font-size: var(--font-size-sm); }
.project-progress label { display: inline; margin-right: var(--spacing-xs); font-weight: bold;}
.project-progress progress { height: 8px; margin-top: var(--spacing-xs); }
.project-progress span { color: var(--color-text-muted); margin-left: var(--spacing-sm); }
.project-actions {
    margin-top: auto; /* Empurra para o final */
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--color-border-light);
    display: flex;
    justify-content: space-between;
    gap: var(--spacing-sm);
}

/* --- Complementary Info (Aside) --- */
.complementary-info {
    background-color: var(--color-background-alt);
    padding: var(--spacing-xl);
    border-radius: var(--border-radius-lg);
    margin: var(--spacing-xl) 0; /* Espaçamento vertical */
    box-shadow: var(--shadow-inner); /* Sombra interna */
}
.complementary-info section { margin-bottom: var(--spacing-xl); }
.complementary-info section:last-child { margin-bottom: 0; }
.complementary-info h2 { color: var(--color-primary); border-bottom: 1px solid var(--color-border); padding-bottom: var(--spacing-sm); }
.complementary-info address { font-style: normal; }
.social-media-links { margin-top: var(--spacing-md); display: flex; gap: var(--spacing-md); }
.social-media-links a { color: var(--color-text-muted); font-size: 1.5em; }
.social-media-links a:hover { color: var(--color-primary); }


/* ==========================================================================
   6. Animações
   ========================================================================== */

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes fadeInAlert {
  from { opacity: 0; transform: translateX(-20px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes pulse { /* Animação sutil para botões/alertas importantes */
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}
.pulse-animation { animation: pulse 1.5s infinite ease-in-out; }


/* ==========================================================================
   7. Responsividade (Exemplos)
   ========================================================================== */

/* Telas Médias (Tablets) */
@media (max-width: 991.98px) {
  :root { --font-size-root: 15px; /* Reduz tamanho base da fonte */ }
  .header-container { flex-direction: column; align-items: flex-start; }
  .main-navigation { width: 100%; margin-top: var(--spacing-md); }
  .primary-menu { flex-direction: column; gap: 0; width: 100%; }
  .primary-menu .menu-item > a { padding: var(--spacing-md); border-bottom: 1px solid var(--color-border-light); border-radius: 0; }
  .primary-menu .menu-item:last-child > a { border-bottom: none; }
  .primary-menu .sub-menu, .primary-menu .sub-sub-menu {
      position: static; /* Submenus ficam inline */
      opacity: 1; visibility: visible; transform: none;
      box-shadow: none; border: none; border-top: 1px dashed var(--color-border);
      padding-left: var(--spacing-md); /* Indentação */
      background-color: rgba(var(--color-primary-rgb), 0.03); /* Fundo sutil */
      min-width: 0;
  }
  .primary-menu .sub-menu a, .primary-menu .sub-sub-menu a { padding-left: var(--spacing-lg); }
  .primary-menu .has-submenu > a::after { /* Ajusta seta */
      content: ' ▼';
      position: absolute; right: var(--spacing-md); top: 50%; transform: translateY(-50%);
      transition: transform var(--transition-speed-fast);
  }
  .primary-menu .has-submenu > a[aria-expanded="true"]::after { transform: translateY(-50%) rotate(180deg); }

  .menu-toggle { /* Exibe o botão do menu */
      display: block;
      position: absolute;
      top: -45px; /* Alinha com o branding */
      right: var(--container-padding-x);
      background: none; border: none; padding: var(--spacing-sm); cursor: pointer;
      font-size: 1.5em; color: var(--color-primary);
  }
  .primary-menu:not(.is-open) { /* Esconde menu se não estiver aberto (classe via JS) */
      display: none;
  }

  .header-user-area { width: 100%; justify-content: flex-end; margin-top: var(--spacing-md); padding-top: var(--spacing-md); border-top: 1px solid var(--color-border-light); }
  .header-search-form .search-input { width: 120px; } /* Reduz busca */
  .header-search-form .search-input:focus { width: 180px; }

  .dashboard-grid {
      grid-template-columns: 1fr 1fr; /* 2 colunas */
      grid-template-areas:
        "map map"
        "stats alerts";
  }
}

/* Telas Pequenas (Smartphones) */
@media (max-width: 767.98px) {
   :root { --font-size-root: 14px; }
   .container-fluid, .container { --container-padding-x: var(--spacing-md); }
   h1 { font-size: 2rem; }
   h2 { font-size: 1.75rem; }

   .dashboard-grid {
      grid-template-columns: 1fr; /* 1 coluna */
      grid-template-areas:
        "map"
        "stats"
        "alerts";
   }
   .widget-content { padding: var(--spacing-md); }

   .complex-form .inline-fields { grid-template-columns: 1fr; } /* Uma coluna */

   .action-tabs [role="tab"] { font-size: var(--font-size-base); padding: var(--spacing-sm) var(--spacing-md); }

   .footer-widgets-area { grid-template-columns: 1fr; } /* Uma coluna */
   .footer-widget { text-align: center; }
   .footer-widget .partner-logos { justify-content: center; }
   #newsletter-form-footer { flex-direction: column; }
}


/* ==========================================================================
   8. Estilos de Impressão
   ========================================================================== */

@media print {
  *, *::before, *::after {
    background: transparent !important;
    color: #000 !important; /* Preto para melhor contraste */
    box-shadow: none !important;
    text-shadow: none !important;
    filter: none !important;
    -ms-filter: none !important;
  }

  body { font-size: 12pt; line-height: 1.4; }
  main { padding: 0; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; } /* Mostra URLs */
  abbr[title]:after { content: " (" attr(title) ")"; }
  /* Não mostra links internos ou de javascript */
  a[href^="#"]:after, a[href^="javascript:"]:after { content: ""; }

  /* Esconde elementos não essenciais */
  .site-header,
  .site-footer,
  .main-navigation,
  .header-user-area,
  .menu-toggle,
  .action-tabs,
  .project-filters,
  .widget-controls,
  .widget-footer .widget-link,
  .btn,
  .skip-link,
  #interactive-map-container, /* Mapa não imprime bem */
  .chart-placeholder, /* Gráficos não imprimem bem sem JS */
  .logistics-placeholder,
  .complementary-info form,
  .social-media-links {
    display: none !important;
  }

  /* Ajusta layout para impressão */
  .main-section, .dashboard-widget, .project-card {
    box-shadow: none !important;
    border: 1px solid #ccc !important;
    page-break-inside: avoid; /* Tenta não quebrar dentro do elemento */
    margin-bottom: 1cm;
    padding: 0.5cm;
  }
  .dashboard-grid, .project-list {
      grid-template-columns: 1fr !important; /* Força uma coluna */
      grid-template-areas: none !important;
  }

  table, .complex-table { border: 1pt solid #666 !important; }
  thead { display: table-header-group; /* Repete cabeçalho da tabela em cada página */ }
  tr, img { page-break-inside: avoid; }
  th, td { border: 1pt solid #ccc !important; padding: 4pt; }

  h2, h3 { page-break-after: avoid; }

  .project-image img { height: auto !important; border: 1px solid #eee;}
}

/* ==========================================================================
   9. CSS Adicional para Complexidade (Exemplos Opcionais)
   ========================================================================== */

/* Filtro sutil em toda a página */
/* body::after {
    content: '';
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: linear-gradient(45deg, rgba(0, 90, 156, 0.02), rgba(92, 184, 92, 0.02));
    mix-blend-mode: overlay;
    pointer-events: none;
    z-index: -1;
} */

/* Seletor extremamente específico (provavelmente não necessário) */
body:not(.user-logged-in) > header#main-header.site-header > div.header-container > nav#primary-navigation ul.primary-menu > li.menu-item[data-nav-section="action"]:hover > ul.sub-menu > li:nth-child(3) a {
    /* text-decoration: wavy underline var(--color-secondary) !important; */
}

/* Usando @supports para algo moderno */
@supports (backdrop-filter: blur(10px)) or (-webkit-backdrop-filter: blur(10px)) {
  .site-header {
    background-color: rgba(var(--color-background-content-rgb, 255, 255, 255), 0.85); /* Fundo semi-transparente */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }
}

/* Adicionar uma borda animada em algum elemento */
.animated-border-element {
    position: relative;
    padding: var(--spacing-xs); /* Espaço para a borda não sobrepor conteúdo */
}
.animated-border-element::before {
    content: '';
    position: absolute;
    inset: 0; /* Cobre todo o elemento */
    border-radius: inherit; /* Herda o border-radius */
    padding: 2px; /* Espessura da "borda" */
    background: conic-gradient(from var(--angle, 0deg), var(--color-primary), var(--color-accent), var(--color-warning), var(--color-primary));
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
            mask-composite: exclude;
    animation: rotateBorder 4s linear infinite;
    z-index: -1; /* Fica atrás do conteúdo */
}
@property --angle { /* Permite animar ângulo do gradiente cônico */
    syntax: '<angle>';
    initial-value: 0deg;
    inherits: false;
}
@keyframes rotateBorder {
    to { --angle: 360deg; }
}

/* Fim do CSS Complexo */
